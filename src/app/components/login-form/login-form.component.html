<div class="flex flex-col items-center mb-8 mt-8">
  <div class="w-12 h-12 rounded-full bg-gradient-to-br from-red-800 to-red-950
              flex items-center justify-center shadow-lg mb-6">
    <svg class="w-7 h-7 text-red-300"
         viewBox="0 0 24 24"
         fill="currentColor">
      <path d="M3 20V4h4l5 9 5-9h4v16h-3V9l-6 11L6 9v11H3z"/>
    </svg>
  </div>
  <h2 class="text-xl font-semibold text-zinc-100">
    {{ mode === 'login' ? 'Sign In' : 'Register' }}
  </h2>
</div>

<form [formGroup]="loginForm" (ngSubmit)="loginSubmit()">
	<div class="card flex flex-col justify-center mb-6 mt-4 gap-8">
		<div>
			<p-floatLabel variant="on">
				<input pInputText id="mail" formControlName="mail" autocomplete="off" class="!w-full"/>
				<label for="mail">Email</label>
			</p-floatLabel>
			@if (loginForm.get('mail')?.invalid && (loginForm.get('mail')?.touched || formSubmitted)) {
				<p-message severity="error" size="small" variant="simple">Email is required.</p-message>
			}
		</div>
		<div>
			<p-floatLabel variant="on">
				<input pInputText id="password" formControlName="password" class="w-full"/>
				<label for="password">Password</label>
			</p-floatLabel>
			@if (loginForm.get('password')?.invalid && (loginForm.get('password')?.touched || formSubmitted)) {
				<p-message severity="error" size="small" variant="simple">Password is required.</p-message>
			}
		</div>
		<div>
			<p-floatLabel *ngIf="mode === 'register'" variant="on">
				<input
					pInputText
					type="password"
					formControlName="confirmPassword"
					class="!w-full"
					[invalid]="loginForm.get('confirmPassword')?.invalid && (loginForm.get('confirmPassword')?.dirty || loginForm.get('confirmPassword')?.touched || formSubmitted)"
				/>
				<label>Confirm Password</label>
			</p-floatLabel>

			@if (loginForm.get('confirmPassword')?.errors?.['passwordsMismatch'] && (loginForm.get('confirmPassword')?.touched || formSubmitted)) {
				<p-message severity="error" size="small" variant="simple">
					Passwords do not match.
				</p-message>
			}
		</div>
		<p class="text-sm text-center text-gray-400">
			<ng-container *ngIf="mode === 'login'">
				Donâ€™t have an account?
				<button
				type="button"
				class="text-emerald-400 hover:underline"
				(click)="setMode('register')">
				Register
				</button>
			</ng-container>

			<ng-container *ngIf="mode === 'register'">
				Already have an account?
				<button
				type="button"
				class="text-emerald-400 hover:underline"
				(click)="setMode('login')">
				Login instead
				</button>
			</ng-container>
		</p>
	</div>

	<div (click)="loginCancel()" class="flex justify-center gap-4">
		<p-button label="Cancel"  class="!w-full" styleClass="!w-full !bg-neutral-900 !border-zinc-400 !text-white !text-lg 
			!tracking-wide hover:!bg-emerald-600 hover:!border-emerald-600 transition-colors mb-6">
		</p-button>
		<p-button type="submit" [label]="mode === 'login' ? 'Login' : 'Register'" [loading]="loading" [disabled]="!loginForm.valid"
			class="!w-full" styleClass="!w-full !bg-neutral-900 !border-zinc-400 !text-white !text-lg 
				!tracking-wide hover:!bg-emerald-600 hover:!border-emerald-600 transition-colors mb-6">
		</p-button>
	</div>
</form>
